title: 如何判断运算是否越界
author: xdkxlk
tags:
  - LeetCode
categories:
  - 算法
date: 2018-10-22 19:33:00
---
>原问题 [字符串转整数 (atoi)](https://leetcode-cn.com/explore/interview/card/top-interview-questions-easy/5/strings/37/)

这道题我觉得重点是符合判断运算是否越界了  
当然，如果你用Long来进行运算，然后判断下结果是否越界也是可以的（例如res是不是大于了Integer.MAX_VALUE），但如果用Integer进行运算怎么判断呢  
这里应该逆向验证，注意，开始我以为**正数越界就一定是负数，并用这个性质判断是否越界，这是错误的**。  
如果不考虑越界，期望的代码是这样的
```java
res = res * 10 + digit
```
错误的判断是否越界的代码
```java
//错误代码
newRes = res * 10 + digit;
if(newRes < res){
	//越界
}
res = newRes;
```
正确的作法
```java
if (Integer.MAX_VALUE / 10 < res ||
      (Integer.MAX_VALUE / 10 == res && Integer.MAX_VALUE % 10 < digit)) {
      //越界
}
res = res * 10 + digit;
```
参考——[判断运算是否越界](https://blog.csdn.net/u013802033/article/details/43346559)